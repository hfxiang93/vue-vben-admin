import{k as e,bB as t,j as n,L as i,n as s,q as o,x as r,Q as a,V as l,X as c,aj as m,O as u,aA as d,B as g,r as p,a7 as v,u as f,bP as w,_ as L,bR as h,bS as b,aM as I}from"./vendor.5450320c.js";/* empty css              */import{p as x,c as _,j as y,aT as C}from"./index.8bfaff0d.js";import{P as k}from"./index.28e1e20b.js";/* empty css              *//* empty css              */import"./onMountedOrActivated.9b0530c4.js";import"./useWindowSizeFn.aa6bbe4b.js";import"./useContentViewHeight.05938b6f.js";var D=e({name:"ImagePreview",components:{Image:t,PreviewGroup:t.PreviewGroup},props:{functional:x.bool,imageList:{type:Array}},setup(e){const{prefixCls:t}=_("image-preview");return{prefixCls:t,getImageList:n((()=>{const{imageList:t}=e;return t?t.map((e=>y(e)?{src:e,placeholder:!1}:e)):[]}))}}});D.render=function(e,t,n,g,p,v){const f=i("Image"),w=i("PreviewGroup");return s(),o("div",{class:e.prefixCls},[r(w,null,{default:a((()=>[!e.imageList||e.$slots.default?l(e.$slots,"default",{key:0}):(s(!0),o(c,{key:1},m(e.getImageList,(e=>(s(),o(f,u({key:e.src},e),d({_:2},[e.placeholder?{name:"placeholder",fn:a((()=>[r(f,u(e,{src:e.placeholder,preview:!1}),null,16,["src"])]))}:void 0]),1040)))),128))])),_:3})],2)};var j,O;(O=j||(j={}))[O.LOADING=0]="LOADING",O[O.DONE=1]="DONE",O[O.FAIL=2]="FAIL";const P={show:{type:Boolean,default:!1},imageList:{type:[Array],default:null},index:{type:Number,default:0}},A="img-preview";var N=e({name:"ImagePreview",props:P,setup(e){const t=g({currentUrl:"",imgScale:1,imgRotate:0,imgTop:0,imgLeft:0,status:j.LOADING,currentIndex:0,moveX:0,moveY:0,show:e.show}),i=p(null),s=p(null);function o(){!function(){const e=f(i);if(!e)return;e.onmousewheel=l,document.body.addEventListener("DOMMouseScroll",l),document.ondragstart=function(){return!1}}();const{index:n,imageList:s}=e;if(!s||!s.length)throw new Error("imageList is undefined");t.currentIndex=n,d(s[n])}function a(){t.imgScale=1,t.imgRotate=0,t.imgTop=0,t.imgLeft=0}function l(e){(e=e||window.event).delta=e.wheelDelta||-e.detail,e.preventDefault(),e.delta>0&&c(.015),e.delta<0&&c(-.015)}function c(e){t.imgScale<=.2&&e<0||(t.imgScale+=e)}function m(e){t.imgRotate+=e}function u(){const e=f(s);e&&(e.onmousemove=null)}function d(e){t.status=j.LOADING;const n=new Image;n.src=e,n.onload=()=>{t.currentUrl=e,t.status=j.DONE},n.onerror=()=>{t.status=j.FAIL}}function I(e){e&&e.stopPropagation(),t.show=!1,document.body.removeEventListener("DOMMouseScroll",l),document.ondragstart=null}function x(){a()}function _(e){e=e||window.event,t.moveX=e.clientX,t.moveY=e.clientY;const n=f(s);n&&(n.onmousemove=y)}function y(e){(e=e||window.event).preventDefault();const n=e.clientX-t.moveX,i=e.clientY-t.moveY;t.imgLeft+=n,t.imgTop+=i,t.moveX=e.clientX,t.moveY=e.clientY}const C=n((()=>{const{imgScale:e,imgRotate:n,imgTop:i,imgLeft:s}=t;return{transform:`scale(${e}) rotate(${n}deg)`,marginTop:`${i}px`,marginLeft:`${s}px`}})),k=n((()=>{const{imageList:t}=e;return t.length>1}));v((()=>{e.show&&o(),e.imageList&&a()}));const D=()=>{if(!f(k))return null;const{currentIndex:n}=t,{imageList:i}=e;return r("div",{class:"img-preview__index"},[n+1,L(" / "),i.length])},O=n=>f(k)?r("div",{class:["img-preview__arrow",n],onClick:()=>function(n){const{currentIndex:i}=t,{imageList:s}=e;"left"===n&&(t.currentIndex--,i<=0&&(t.currentIndex=s.length-1)),"right"===n&&(t.currentIndex++,i>=s.length-1&&(t.currentIndex=0)),d(s[t.currentIndex])}(n)},[r("left"===n?h:b,null,null)]):null;return()=>t.show&&r("div",{class:A,ref:i,onMouseup:u},[r("div",{class:"img-preview-content"},[r("img",{style:f(C),class:["img-preview-image",t.status===j.DONE?"":"hidden"],ref:s,src:t.currentUrl,onMousedown:_},null),r("div",{class:"img-preview__close",onClick:I},[r(w,{class:"img-preview__close-icon"},null)]),D(),r("div",{class:"img-preview__controller"},[r("div",{class:"img-preview__controller-item",onClick:()=>c(-.15)},[r("img",{src:"/vue-vben-admin/assets/unscale.99ad049c.svg"},null)]),r("div",{class:"img-preview__controller-item",onClick:()=>c(.15)},[r("img",{src:"/vue-vben-admin/assets/scale.8d8ebde4.svg"},null)]),r("div",{class:"img-preview__controller-item",onClick:x},[r("img",{src:"/vue-vben-admin/assets/resume.6e209205.svg"},null)]),r("div",{class:"img-preview__controller-item",onClick:()=>m(-90)},[r("img",{src:"/vue-vben-admin/assets/unrotate.f9dd5a27.svg"},null)]),r("div",{class:"img-preview__controller-item",onClick:()=>m(90)},[r("img",{src:"/vue-vben-admin/assets/p-rotate.1d232189.svg"},null)])]),O("left"),O("right")])])}});let S=null;const E=["https://picsum.photos/id/66/346/216","https://picsum.photos/id/67/346/216","https://picsum.photos/id/68/346/216"];var M=e({components:{PageWrapper:k,ImagePreview:D},setup:()=>({imgList:E,openImg:function(){!function(e){if(!C)return;const{imageList:t,show:n=!0,index:i=0}=e,s={},o=document.createElement("div");s.imageList=t,s.show=n,s.index=i,S=r(N,s),I(S,o),document.body.appendChild(o)}({imageList:E})}})});const X=L("无预览图");M.render=function(e,t,n,l,c,m){const u=i("ImagePreview"),d=i("a-button"),g=i("PageWrapper");return s(),o(g,{title:"图片预览示例"},{default:a((()=>[r(u,{imageList:e.imgList},null,8,["imageList"]),r(d,{onClick:e.openImg,type:"primary"},{default:a((()=>[X])),_:1},8,["onClick"])])),_:1})};export default M;
