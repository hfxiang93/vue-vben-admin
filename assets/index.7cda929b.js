var r;import e from"./DetailModal.6793f6fd.js";import{_ as o}from"./TableImg.bcb7c008.js";import{f as i}from"./BasicForm.d66dec9c.js";import{u as t}from"./useTable.185072b0.js";import{b as s}from"./index.d70d1e77.js";import{aw as a,e as n,a$ as d}from"./index.49a9f596.js";import{getColumns as l}from"./data.0a67bc5e.js";import{k as c,r as m,F as p,K as u,ao as f,L as b,n as j,q as x,X as g,aj as y,w as v,v as E,x as w,Q as h,_ as L,y as k}from"./vendor.5450320c.js";import"./index.c6b2fb54.js";/* empty css              */import"./useDescription.bc803354.js";/* empty css              *//* empty css              */import"./useForm.ed9f8ca7.js";/* empty css              *//* empty css              *//* empty css              */import"./uuid.2b29000c.js";import"./useWindowSizeFn.aa6bbe4b.js";import"./onMountedOrActivated.9b0530c4.js";/* empty css              */import"./useSortable.dc90a630.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.4be89c8a.js";/* empty css              *//* empty css              *//* empty css              */import"./download.9ee3d74d.js";import"./base64Conver.bb012c73.js";import"./index.c763d9e0.js";(r||(r={})).Error="/error";var C=c({name:"ErrorHandler",components:{DetailModal:e,BasicTable:o,TableAction:i},setup(){const e=m(),o=m([]),{t:i}=n(),c=d(),[b,{setTableData:j}]=t({title:i("sys.errorLog.tableTitle"),columns:l(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[x,{openModal:g}]=s();return p((()=>c.getErrorLogInfoList),(r=>{u((()=>{j(f(r))}))}),{immediate:!0}),{register:b,registerModal:x,handleDetail:function(r){e.value=r,g(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){o.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return e=this,o=null,i=function*(){yield a.get({url:r.Error})},new Promise(((r,t)=>{var s=r=>{try{n(i.next(r))}catch(e){t(e)}},a=r=>{try{n(i.throw(r))}catch(e){t(e)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,a);n((i=i.apply(e,o)).next())}));var e,o,i},imgList:o,rowInfo:e,t:i}}});const D={class:"p-4"};C.render=function(r,e,o,i,t,s){const a=b("DetailModal"),n=b("a-button"),d=b("TableAction"),l=b("BasicTable");return j(),x("div",D,[(j(!0),x(g,null,y(r.imgList,(r=>v((j(),x("img",{key:r,src:r},null,8,["src"])),[[E,!1]]))),128)),w(a,{info:r.rowInfo,onRegister:r.registerModal},null,8,["info","onRegister"]),w(l,{onRegister:r.register,class:"error-handle-table"},{toolbar:h((()=>[w(n,{onClick:r.fireVueError,type:"primary"},{default:h((()=>[L(k(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),w(n,{onClick:r.fireResourceError,type:"primary"},{default:h((()=>[L(k(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),w(n,{onClick:r.fireAjaxError,type:"primary"},{default:h((()=>[L(k(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:h((({record:e})=>[w(d,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default C;
